<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title></title>
    <script src="js/mui.min.js"></script>
    <script src="js/jquery-3.2.1.min.js"></script>
    <link href="css/mui.min.css" rel="stylesheet"/>
    <link href="css/moment_main.css" rel="stylesheet"/>
    <link href="css/main_page.css" rel="stylesheet"/>

 
    	<style>
			.mui-control-content {
				background-color: white;
				min-height: 215px;
			}
			.mui-control-content .mui-loading {
				margin-top: 50px;
			}
			.mui-bar{
              background-color: #f18c3c;
          }
		</style>
</head>
<body>
	
	
		<div id="offCanvasWrapper" class="mui-off-canvas-wrap mui-draggable">
			<!--侧滑菜单部分-->
			<aside id="offCanvasSide" class="mui-off-canvas-left">
				<div id="offCanvasSideScroll" class="mui-scroll-wrapper">
					<div class="mui-scroll">
 						<ul class="mui-table-view mui-table-view-chevron mui-table-view-inverted">
							<li class="mui-table-view-cell">
								<a class="mui-navigate-right">
									收藏夹
								</a>
							</li>
						
						</ul>
					</div>
				</div>
			</aside>
			<!--主界面部分-->
			<div class="mui-inner-wrap">
				<header class="mui-bar mui-bar-nav">
					<a href="#offCanvasSide" class="mui-icon mui-action-menu mui-icon-bars mui-pull-left"></a>
					<a class="mui-action-back mui-btn mui-btn-link mui-pull-right"><span class="mui-icon mui-icon-camera"></span></a>
					<h1 class="mui-title">Meet with Restaurant</h1>
				</header>
		
		 
		<!--  Top Templete  End -->
		<div id="offCanvasContentScroll" class="mui-content mui-scroll-wrapper">
	
          <div id="slider" class="mui-slider">
				<div id="sliderSegmentedControl" class="mui-slider-indicator mui-segmented-control mui-segmented-control-inverted">
					<a class="mui-control-item " href="#item1mobile">
				FOLLOW
			</a>
					<a class="mui-control-item" href="#item2mobile">
				FOLLOWING
			</a> 
			</div>
			<div id="sliderProgressBar" class="mui-slider-progress-bar mui-col-xs-12"></div>
			
			</div>
	           <div class="mui-slider-group">
					<div id="item1mobile" class="mui-slider-item mui-control-content mui-active">
						<div id="scroll1" class="mui-scroll-wrapper">
								<ul style="list-style: none; padding-left: 0vw;"  id="OA_task_1"></ul>
						</div>
					</div>
 
					<div id="item2mobile" class="mui-slider-item mui-control-content">
						<div id="scroll2" class="mui-scroll-wrapper">
						<ul style="list-style: none; padding-left: 0vw;"  id="OA_task_2"></ul>
						</div>
					</div>
				</div>
		</div>
	</div>
</div>
	
	
</body>
<script language="JavaScript">
 
	var uid = localStorage.getItem('user_id');
	
	mui.getJSON('http://whois8.cn/getfollowlist.php',{uid:uid},function(data){
		       //数据绑定在此处
	           var list = document.getElementById("OA_task_1");
	           var fragment = document.createDocumentFragment();
               var li;
		       mui.each(data,function(index,item){
           
                    li = document.createElement('li');
                    li.className = 'mui-table-view-cell';
                    li.id=item[0];
                    //console.log(data5);
                    li.innerHTML =      '<div class="mui-slider-right mui-disabled"><a class="mui-btn mui-btn-red">删除</a></div>'+
                                        '<div class="mui-slider-handle" id='+item[1]+'><span class="user_headImg"><img src="img/icon/user_headImg.png" /></span>'+
                                        '<span class="user_info"><p>'+item[1]+'</p><a>'+item[2]+'</a></span>'+
                                        '</div>';
                    fragment.appendChild(li);
                 
                })
		       list.appendChild(fragment);
 
	         }
           );
	
		mui.getJSON('http://whois8.cn/getfollowinglist.php',{uid:uid},function(data){
		       //数据绑定在此处
	           var list = document.getElementById("OA_task_2");
	           var fragment = document.createDocumentFragment();
               var li;
		       mui.each(data,function(index,item){
           
                    li = document.createElement('li');
                    li.className = 'mui-table-view-cell';
                    li.id=item[0];
                    
                    //console.log(data5);
                    li.innerHTML =      '<div class="mui-slider-right mui-disabled"><a class="mui-btn mui-btn-red">删除</a></div>'+
                                        '<div class="mui-slider-handle" ><span class="user_headImg"><img src="img/icon/user_headImg.png" /></span>'+
                                        '<span class="user_info"><p>'+item[1]+'</p><a>'+item[2]+'</a></span>'+
                                        '</div>';
                    fragment.appendChild(li);
                 
                })
		       list.appendChild(fragment);
 
	        });
	       
mui("#OA_task_1").on('tap','.mui-table-view-cell',function(){
   //获取id
  var id = this.getAttribute("id");
  
               mui.openWindow({
                  url: 'chat_content.html',
                  id: 'chat_content',
                  extras:{
                    fuid:id
                  }  
                })
  
})     

mui("#OA_task_2").on('tap','.mui-table-view-cell',function(){
   //获取id
  var id = this.getAttribute("id");
                mui.openWindow({
                  url: 'chat_content.html',
                  id: 'chat_content',
                  extras:{
                    fuid:id
                  }  
                });
  
})     
</script>

	<script>
			mui.init();
			(function($) {
				//第一个demo，拖拽后显示操作图标，点击操作图标删除元素；
				$('#OA_task_1').on('tap', '.mui-btn', function(event) {
					var elem = this;
					var li = elem.parentNode.parentNode;
					mui.confirm('确认删除该条记录？', 'Hello MUI', btnArray, function(e) {
						if (e.index == 0) {
							li.parentNode.removeChild(li);
						} else {
							setTimeout(function() {
								$.swipeoutClose(li);
							}, 0);
						}
					});
				});
				var btnArray = ['确认', '取消'];

				$('#OA_task_2').on('tap', '.mui-btn', function(event) {
					var elem = this;
					var li = elem.parentNode.parentNode;
					mui.confirm('确认删除该条记录1？', 'Hello MUI', btnArray, function(e) {
						if (e.index == 0) {
							li.parentNode.removeChild(li);
						} else {
							setTimeout(function() {
								$.swipeoutClose(li);
							}, 0);
						}
					});
				});
			})(mui);
		</script>
</html>